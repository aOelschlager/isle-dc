version: "3.7"
networks:
  isle-dc-two_default:
    external: true
    name: ${NETWORK_DEFAULT}
services:
  crayfits:
    restart: ${RESTART_POLICY:-unless-stopped}
    image: ${REPOSITORY:-islandora}/crayfits:${TAG:-latest}
    depends_on:
      - fits
    networks:
      isle-dc-two_default:
    deploy:
      resources:
          limits:
            memory: ${CRAYFITS_MEMORY_LIMIT:-1G}
          reservations:
            memory: 512M
  fits:
    restart: ${RESTART_POLICY:-unless-stopped}
    image: ${REPOSITORY:-islandora}/fits:${TAG:-latest}
    networks:
      isle-dc-two_default:
    deploy:
      resources:
          limits:
            memory: ${FITS_MEMORY_LIMIT:-2G}
          reservations:
            memory: 1000M